(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/subhome/details"],{"0a31":function(t,e,i){"use strict";var o,n=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){return t.service.returns()},t.e1=function(e){t.show=!0},t.e2=function(e){t.show=1,t.type="cart"},t.e3=function(e){t.show=1,t.type="goods"},t.e4=function(e){t.show=0},t.e5=function(e){t.show=0})},r=[];i.d(e,"b",function(){return n}),i.d(e,"c",function(){return r}),i.d(e,"a",function(){return o})},"0d33":function(t,e,i){"use strict";i.r(e);var o=i("0a31"),n=i("fa5b");for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);i("2955");var s,a=i("f0c5"),l=Object(a["a"])(n["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);e["default"]=l.exports},1336:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(i("082c"));n(i("be83"));function n(t){return t&&t.__esModule?t:{default:t}}var r=function(){return i.e("pages/common/load").then(i.bind(null,"22c2"))},s={components:{load:r},data:function(){return{title:"产品详情",goods:"",isLoad:!1,is_freight_free:"",freight_price:"",show:0,coupon:"",num:1,choose_list:[],price:"",inventory:"",type:"",id:"",index_list:0,spec:[],comment_data:"",collects:"",load_show:!0,shows:!1}},methods:{receive:function(e){this.service.entire(this,"post",this.APIconfig.api_root.subhome.s_receive,{coupon_id:this.coupon[e].id,user_id:this.$store.state.user.id},function(i,o){0==o.code?i.coupon[e].is_operable=0:t.showToast({icon:"none",title:o.msg})})},change_num:function(t){"reduce"==t?1==this.num?this.num=1:this.num--:this.num++},choose:function(t,e){var i=this.choose_list;if(t==this.index_list){this.index_list==i.length-1?this.index_list=t:this.index_list=t+1;var o=!0,n=!1,r=void 0;try{for(var s,a=i[t].value[Symbol.iterator]();!(o=(s=a.next()).done);o=!0){var l=s.value;l.show=!1}}catch(S){n=!0,r=S}finally{try{o||null==a.return||a.return()}finally{if(n)throw r}}if(i[t].value[e].show=!0,this.choose_list=JSON.parse(JSON.stringify(i)),this.spec[t]={type:i[t].name,value:i[t].value[e].name},t==i.length-1)return void this.service.entire(this,"post",this.APIconfig.api_root.subhome.s_SpecDetail,{id:this.id,spec:this.spec},function(t,e){t.price=e.data.price,t.inventory=e.data.inventory})}else if(t<this.index_list){this.spec.length=t;for(var c=t;c<i.length;c++){var u=!0,d=!1,h=void 0;try{for(var f,v=i[c].value[Symbol.iterator]();!(u=(f=v.next()).done);u=!0){var _=f.value;_.show=!1}}catch(S){d=!0,h=S}finally{try{u||null==v.return||v.return()}finally{if(d)throw h}}}for(var p=t+1;p<i.length;p++){var y=!0,m=!1,g=void 0;try{for(var b,w=i[p].value[Symbol.iterator]();!(y=(b=w.next()).done);y=!0){var x=b.value;x.disabled=!0}}catch(S){m=!0,g=S}finally{try{y||null==w.return||w.return()}finally{if(m)throw g}}}i[t].value[e].show=!0,i[t].value[e].disabled=!1,this.choose_list=JSON.parse(JSON.stringify(i)),this.spec.push({type:i[t].name,value:i[t].value[e].name}),this.index_list=this.spec.length}this.service.entire(this,"post",this.APIconfig.api_root.subhome.s_SpecType,{id:this.id,spec:this.spec},function(t,e){if(0==e.code){var o=e.data,n=!0,r=!1,s=void 0;try{for(var a,l=o[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=a.value,u=!0,d=!1,h=void 0;try{for(var f,v=i[t.index_list].value[Symbol.iterator]();!(u=(f=v.next()).done);u=!0){var _=f.value;c==_.name&&(_.disabled=!1)}}catch(S){d=!0,h=S}finally{try{u||null==v.return||v.return()}finally{if(d)throw h}}}}catch(S){r=!0,s=S}finally{try{n||null==l.return||l.return()}finally{if(r)throw s}}t.choose_list=i}})},save:function(){if(this.goods.specifications.choose.length==this.spec.length)if("cart"==this.type)this.service.entire(this,"post",this.APIconfig.api_root.subhome.s_Save,{goods_id:this.id,stock:this.num,spec:this.spec,user_id:this.$store.state.user.id},function(e,i){0==i.code&&(t.showToast({icon:"none",title:"成功加入购物车！"}),e.show=0)});else{var e={id:this.id,type:"goods",num:this.num,spec:this.spec};t.navigateTo({url:"../com_page/s_order?data="+JSON.stringify(e)})}else t.showToast({icon:"none",title:"请选择商品规格！"})},collect:function(){var e=this.service.loading();this.service.entire(this,"post",this.APIconfig.api_root.subhome.s_Favor,{user_id:this.$store.state.user.id,id:this.id},function(i,n){t.hideLoading(),clearTimeout(e),i.tips_test=n.msg,i.tips_img=o.default,i.shows=!0,setTimeout(function(){i.shows=!1},1500),0==n.code&&(1==i.collects?i.collects=0:i.collects=1)})}},onLoad:function(t){this.id=t.id,this.service.entire(this,"post",this.APIconfig.api_root.subhome.s_detail,{goods_id:t.id,user_id:this.$store.state.user.id},function(t,e){t.goods=e.data.goods,t.goods.stars_num=new Array(Number(e.data.goods.comments_score_star)),t.isLoad=!0,t.is_freight_free=e.data.goods.freight_free.is_freight_free,t.freight_price=e.data.goods.freight_free.freight_price,t.coupon=e.data.plugins_coupon_data,t.collects=e.data.goods.is_favor,t.comment_data=e.data.goods.comments;var i=!0,o=!1,n=void 0;try{for(var r,s=t.comment_data[Symbol.iterator]();!(i=(r=s.next()).done);i=!0){var a=r.value;a.rating_num=new Array(Number(a.rating))}}catch(N){o=!0,n=N}finally{try{i||null==s.return||s.return()}finally{if(o)throw n}}t.price=e.data.goods.price,t.inventory=e.data.goods.inventory;var l=e.data.goods.specifications.choose;if(""!=l){var c=!0,u=!1,d=void 0;try{for(var h,f=l[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){var v=h.value,_=!0,p=!1,y=void 0;try{for(var m,g=v.value[Symbol.iterator]();!(_=(m=g.next()).done);_=!0){var b=m.value;b.show=!1,b.disabled=!0}}catch(N){p=!0,y=N}finally{try{_||null==g.return||g.return()}finally{if(p)throw y}}}}catch(N){u=!0,d=N}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}var w=!0,x=!1,S=void 0;try{for(var A,P=l[0].value[Symbol.iterator]();!(w=(A=P.next()).done);w=!0){var J=A.value;J.disabled=!1}}catch(N){x=!0,S=N}finally{try{w||null==P.return||P.return()}finally{if(x)throw S}}}t.choose_list=l,t.load_show=!1})},onShow:function(){}};e.default=s}).call(this,i("6e42")["default"])},2955:function(t,e,i){"use strict";var o=i("6530"),n=i.n(o);n.a},"338a":function(t,e,i){"use strict";(function(t){i("7932"),i("921b");o(i("66fd"));var e=o(i("0d33"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("6e42")["createPage"])},6530:function(t,e,i){},fa5b:function(t,e,i){"use strict";i.r(e);var o=i("1336"),n=i.n(o);for(var r in o)"default"!==r&&function(t){i.d(e,t,function(){return o[t]})}(r);e["default"]=n.a}},[["338a","common/runtime","common/vendor"]]]);