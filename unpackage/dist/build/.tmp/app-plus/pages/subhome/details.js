(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/subhome/details"],{"0d33":function(e,t,i){"use strict";i.r(t);var o=i("ce11"),n=i("fa5b");for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);i("2955");var r,a=i("f0c5"),c=Object(a["a"])(n["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],r);t["default"]=c.exports},1336:function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(i("082c"));n(i("be83"));function n(e){return e&&e.__esModule?e:{default:e}}function s(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=r(e))){var t=0,i=function(){};return{s:i,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,n,s=!0,a=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return s=e.done,e},e:function(e){a=!0,n=e},f:function(){try{s||null==o.return||o.return()}finally{if(a)throw n}}}}function r(e,t){if(e){if("string"===typeof e)return a(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,o=new Array(t);i<t;i++)o[i]=e[i];return o}var c=function(){i.e("pages/common/load").then(function(){return resolve(i("22c2"))}.bind(null,i)).catch(i.oe)},u={components:{load:c},data:function(){return{title:"产品详情",goods:"",isLoad:!1,is_freight_free:"",freight_price:"",show:0,coupon:"",num:1,choose_list:[],price:"",inventory:"",type:"",id:"",index_list:0,spec:[],comment_data:"",collects:"",load_show:!0,shows:!1}},methods:{receive:function(t){this.service.entire(this,"post",this.APIconfig.api_root.subhome.s_receive,{coupon_id:this.coupon[t].id,user_id:this.$store.state.user.id},(function(i,o){0==o.code?i.coupon[t].is_operable=0:e.showToast({icon:"none",title:o.msg})}))},change_num:function(e){"reduce"==e?1==this.num?this.num=1:this.num--:this.num++},choose:function(e,t){var i=this.choose_list;if(e==this.index_list){this.index_list==i.length-1?this.index_list=e:this.index_list=e+1;var o,n=s(i[e].value);try{for(n.s();!(o=n.n()).done;){var r=o.value;r.show=!1}}catch(p){n.e(p)}finally{n.f()}if(i[e].value[t].show=!0,this.choose_list=JSON.parse(JSON.stringify(i)),this.spec[e]={type:i[e].name,value:i[e].value[t].name},e==i.length-1)return void this.service.entire(this,"post",this.APIconfig.api_root.subhome.s_SpecDetail,{id:this.id,spec:this.spec},(function(e,t){e.price=t.data.price,e.inventory=t.data.inventory}))}else if(e<this.index_list){this.spec.length=e;for(var a=e;a<i.length;a++){var c,u=s(i[a].value);try{for(u.s();!(c=u.n()).done;){var l=c.value;l.show=!1}}catch(p){u.e(p)}finally{u.f()}}for(var d=e+1;d<i.length;d++){var f,h=s(i[d].value);try{for(h.s();!(f=h.n()).done;){var v=f.value;v.disabled=!0}}catch(p){h.e(p)}finally{h.f()}}i[e].value[t].show=!0,i[e].value[t].disabled=!1,this.choose_list=JSON.parse(JSON.stringify(i)),this.spec.push({type:i[e].name,value:i[e].value[t].name}),this.index_list=this.spec.length}this.service.entire(this,"post",this.APIconfig.api_root.subhome.s_SpecType,{id:this.id,spec:this.spec},(function(e,t){if(0==t.code){var o,n=t.data,r=s(n);try{for(r.s();!(o=r.n()).done;){var a,c=o.value,u=s(i[e.index_list].value);try{for(u.s();!(a=u.n()).done;){var l=a.value;c==l.name&&(l.disabled=!1)}}catch(p){u.e(p)}finally{u.f()}}}catch(p){r.e(p)}finally{r.f()}e.choose_list=i}}))},save:function(){if(this.goods.specifications.choose.length==this.spec.length)if("cart"==this.type)this.service.entire(this,"post",this.APIconfig.api_root.subhome.s_Save,{goods_id:this.id,stock:this.num,spec:this.spec,user_id:this.$store.state.user.id},(function(t,i){0==i.code&&(e.showToast({icon:"none",title:"成功加入购物车！"}),t.show=0)}));else{var t={id:this.id,type:"goods",num:this.num,spec:this.spec};e.navigateTo({url:"../com_page/s_order?data="+JSON.stringify(t)})}else e.showToast({icon:"none",title:"请选择商品规格！"})},collect:function(){var t=this.service.loading();this.service.entire(this,"post",this.APIconfig.api_root.subhome.s_Favor,{user_id:this.$store.state.user.id,id:this.id},(function(i,n){e.hideLoading(),clearTimeout(t),i.tips_test=n.msg,i.tips_img=o.default,i.shows=!0,setTimeout((function(){i.shows=!1}),1500),0==n.code&&(1==i.collects?i.collects=0:i.collects=1)}))}},onLoad:function(e){this.id=e.id,this.service.entire(this,"post",this.APIconfig.api_root.subhome.s_detail,{goods_id:e.id,user_id:this.$store.state.user.id},(function(e,t){e.goods=t.data.goods,e.goods.stars_num=new Array(Number(t.data.goods.comments_score_star)),e.isLoad=!0,e.is_freight_free=t.data.goods.freight_free.is_freight_free,e.freight_price=t.data.goods.freight_free.freight_price,e.coupon=t.data.plugins_coupon_data,e.collects=t.data.goods.is_favor,e.comment_data=t.data.goods.comments;var i,o=s(e.comment_data);try{for(o.s();!(i=o.n()).done;){var n=i.value;n.rating_num=new Array(Number(n.rating))}}catch(_){o.e(_)}finally{o.f()}e.price=t.data.goods.price,e.inventory=t.data.goods.inventory;var r=t.data.goods.specifications.choose;if(""!=r){var a,c=s(r);try{for(c.s();!(a=c.n()).done;){var u,l=a.value,d=s(l.value);try{for(d.s();!(u=d.n()).done;){var f=u.value;f.show=!1,f.disabled=!0}}catch(_){d.e(_)}finally{d.f()}}}catch(_){c.e(_)}finally{c.f()}var h,v=s(r[0].value);try{for(v.s();!(h=v.n()).done;){var p=h.value;p.disabled=!1}}catch(_){v.e(_)}finally{v.f()}}e.choose_list=r,e.load_show=!1}))},onShow:function(){}};t.default=u}).call(this,i("6e42")["default"])},2955:function(e,t,i){"use strict";var o=i("daa3"),n=i.n(o);n.a},"338a":function(e,t,i){"use strict";(function(e){i("7932"),i("921b");o(i("66fd"));var t=o(i("0d33"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,i("6e42")["createPage"])},ce11:function(e,t,i){"use strict";var o,n=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){return e.service.returns()},e.e1=function(t){e.show=!0},e.e2=function(t){e.show=1,e.type="cart"},e.e3=function(t){e.show=1,e.type="goods"},e.e4=function(t){e.show=0},e.e5=function(t){e.show=0})},s=[];i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return s})),i.d(t,"a",(function(){return o}))},daa3:function(e,t,i){},fa5b:function(e,t,i){"use strict";i.r(t);var o=i("1336"),n=i.n(o);for(var s in o)"default"!==s&&function(e){i.d(t,e,(function(){return o[e]}))}(s);t["default"]=n.a}},[["338a","common/runtime","common/vendor"]]]);