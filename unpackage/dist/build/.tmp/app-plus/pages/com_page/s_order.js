(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/com_page/s_order"],{"05ae":function(t,e,n){},"687a":function(t,e,n){"use strict";var o,a=function(){var t=this,e=t.$createElement,n=(t._self._c,Number(t.data.total_price)),o=t.__map(t.coupon_list,(function(e,n){var o=Number(e.coupon.where_order_price);return{$orig:t.__get_orig(e),m1:o}}));t._isMounted||(t.e0=function(e){t.show=!t.show},t.e1=function(e){t.show=!t.show}),t.$mp.data=Object.assign({},{$root:{m0:n,l0:o}})},i=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o}))},"7c05":function(t,e,n){"use strict";(function(t){function o(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=a(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i,r=!0,c=!1;return{s:function(){o=t[Symbol.iterator]()},n:function(){var t=o.next();return r=t.done,t},e:function(t){c=!0,i=t},f:function(){try{r||null==o.return||o.return()}finally{if(c)throw i}}}}function a(t,e){if(t){if("string"===typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(){n.e("pages/common/returns").then(function(){return resolve(n("20fe"))}.bind(null,n)).catch(n.oe)},c={data:function(){return{title:"确认订单",data:[],address:"",shopp:"",payment:"",indexs:"",id:"",payment_id:"",show_add:3,require_data:"",coupon_list:"",show:!1,recording:"未选择",extension:""}},components:{returns:r},methods:{choice:function(t){var e,n=o(this.payment);try{for(n.s();!(e=n.n()).done;){var a=e.value;a.choice=!1}}catch(i){n.e(i)}finally{n.f()}this.payment[t].choice=!0,this.payment_id=this.payment[t].id,this.payment_name=this.payment[t].payment},discount_choice:function(t){var e,n=o(this.coupon_list);try{for(n.s();!(e=n.n()).done;){var a=e.value;a.choice=!1}}catch(i){n.e(i)}finally{n.f()}this.coupon_list[t].choice=!0},finish:function(){var t=this;this.show=!1,this.coupon_list.forEach((function(e,n){1==e.choice&&(e.id?(t.require_data.coupon_id=t.coupon_list[n].id,0==t.coupon_list[n].coupon.type?t.recording="￥"+t.coupon_list[n].coupon.discount_value+"元":t.recording="￥"+t.coupon_list[n].coupon.discount_value+"折"):(t.require_data.coupon_id="",t.recording="不使用"))})),this.Index()},Index:function(){this.service.entire(this,"post",this.APIconfig.api_root.com_page.buy_index,this.require_data,(function(t,e){if(t.data=e.data.base,""!=e.data.plugins_coupon_data.coupon_list){var n={not_coupon:"不使用"},a=e.data.plugins_coupon_data.coupon_list;a.push(n);var i,r=o(a);try{for(r.s();!(i=r.n()).done;){var c=i.value;c.choice=!1}}catch(h){r.e(h)}finally{r.f()}if(""!=e.data.plugins_coupon_data.coupon_choice){var s,u=o(a);try{for(u.s();!(s=u.n()).done;){var d=s.value;d.id==e.data.plugins_coupon_data.coupon_choice.id&&(d.choice=!0)}}catch(h){u.e(h)}finally{u.f()}}t.coupon_list=a}e.data.base.address?t.show_add=1:t.show_add=0,t.address=e.data.base.address,t.shopp=e.data.goods_list,t.extension=e.data.extension_data;var f,l=e.data.payment_list,p=o(l);try{for(p.s();!(f=p.n()).done;){var _=f.value;_.choice=!1}}catch(h){p.e(h)}finally{p.f()}t.payment=l}))},payments:function(){var e=this;this.address?this.payment_id?t.showModal({title:"提示",content:"是否确定支付？",success:function(n){if(n.confirm){var o={user_id:e.$store.state.user.id,address_id:e.address.id,payment_id:e.payment_id},a=Object.assign(o,e.require_data);e.service.entire(e,"post",e.APIconfig.api_root.com_page.buy_add,a,(function(n,o){0==o.code?n.service.entire(n,"post",n.APIconfig.api_root.com_page.order_pay,{user_id:e.$store.state.user.id,id:o.data.order.id},(function(n,o){0==o.code?n.service.order.apply(n,[o,e.payment_name,"../subuser/s_order?status=-1"]):t.showToast({icon:"none",title:o.msg})})):t.showToast({icon:"none",title:o.msg})}))}else if(n.cancel)return}}):t.showToast({icon:"none",title:"请选择支付方式"}):t.showToast({icon:"none",title:"请添加收货地址"})}},onLoad:function(t){this.options=JSON.parse(t.data);var e,n=JSON.parse(t.data);e="cart"==n.type?{user_id:this.$store.state.user.id,ids:n.id,buy_type:n.type}:{user_id:this.$store.state.user.id,goods_id:n.id,stock:n.num,spec:n.spec,buy_type:n.type},this.require_data=e},onShow:function(){this.Index()}};e.default=c}).call(this,n("6e42")["default"])},a5a1:function(t,e,n){"use strict";var o=n("05ae"),a=n.n(o);a.a},c165:function(t,e,n){"use strict";(function(t){n("7932"),n("921b");o(n("66fd"));var e=o(n("d5e8"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])},ca11:function(t,e,n){"use strict";n.r(e);var o=n("7c05"),a=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=a.a},d5e8:function(t,e,n){"use strict";n.r(e);var o=n("687a"),a=n("ca11");for(var i in a)"default"!==i&&function(t){n.d(e,t,(function(){return a[t]}))}(i);n("a5a1");var r,c=n("f0c5"),s=Object(c["a"])(a["default"],o["b"],o["c"],!1,null,"745cd4ed",null,!1,o["a"],r);e["default"]=s.exports}},[["c165","common/runtime","common/vendor"]]]);