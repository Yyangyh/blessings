(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/com_page/s_order"],{"687a":function(t,e,o){"use strict";var n,a=function(){var t=this,e=t.$createElement,o=(t._self._c,Number(t.data.total_price)),n=t.__map(t.coupon_list,function(e,o){var n=Number(e.coupon.where_order_price);return{$orig:t.__get_orig(e),m1:n}});t._isMounted||(t.e0=function(e){t.show=!t.show},t.e1=function(e){t.show=!t.show}),t.$mp.data=Object.assign({},{$root:{m0:o,l0:n}})},i=[];o.d(e,"b",function(){return a}),o.d(e,"c",function(){return i}),o.d(e,"a",function(){return n})},"7c05":function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(){return o.e("pages/common/returns").then(o.bind(null,"20fe"))},a={data:function(){return{title:"确认订单",data:[],address:"",shopp:"",payment:"",indexs:"",id:"",payment_id:"",show_add:3,require_data:"",coupon_list:"",show:!1,recording:"未选择",extension:""}},components:{returns:n},methods:{choice:function(t){var e=!0,o=!1,n=void 0;try{for(var a,i=this.payment[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var r=a.value;r.choice=!1}}catch(s){o=!0,n=s}finally{try{e||null==i.return||i.return()}finally{if(o)throw n}}this.payment[t].choice=!0,this.payment_id=this.payment[t].id,this.payment_name=this.payment[t].payment},discount_choice:function(t){var e=!0,o=!1,n=void 0;try{for(var a,i=this.coupon_list[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var r=a.value;r.choice=!1}}catch(s){o=!0,n=s}finally{try{e||null==i.return||i.return()}finally{if(o)throw n}}this.coupon_list[t].choice=!0},finish:function(){var t=this;this.show=!1,this.coupon_list.forEach(function(e,o){1==e.choice&&(e.id?(t.require_data.coupon_id=t.coupon_list[o].id,0==t.coupon_list[o].coupon.type?t.recording="￥"+t.coupon_list[o].coupon.discount_value+"元":t.recording="￥"+t.coupon_list[o].coupon.discount_value+"折"):(t.require_data.coupon_id="",t.recording="不使用"))}),this.Index()},Index:function(){this.service.entire(this,"post",this.APIconfig.api_root.com_page.buy_index,this.require_data,function(t,e){if(t.data=e.data.base,""!=e.data.plugins_coupon_data.coupon_list){var o={not_coupon:"不使用"},n=e.data.plugins_coupon_data.coupon_list;n.push(o);var a=!0,i=!1,r=void 0;try{for(var s,c=n[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var u=s.value;u.choice=!1}}catch(S){i=!0,r=S}finally{try{a||null==c.return||c.return()}finally{if(i)throw r}}if(""!=e.data.plugins_coupon_data.coupon_choice){var d=!0,l=!1,p=void 0;try{for(var f,_=n[Symbol.iterator]();!(d=(f=_.next()).done);d=!0){var h=f.value;h.id==e.data.plugins_coupon_data.coupon_choice.id&&(h.choice=!0)}}catch(S){l=!0,p=S}finally{try{d||null==_.return||_.return()}finally{if(l)throw p}}}t.coupon_list=n}e.data.base.address?t.show_add=1:t.show_add=0,t.address=e.data.base.address,t.shopp=e.data.goods_list,t.extension=e.data.extension_data;var y=e.data.payment_list,v=!0,m=!1,g=void 0;try{for(var b,w=y[Symbol.iterator]();!(v=(b=w.next()).done);v=!0){var x=b.value;x.choice=!1}}catch(S){m=!0,g=S}finally{try{v||null==w.return||w.return()}finally{if(m)throw g}}t.payment=y})},payments:function(){var e=this;this.address?this.payment_id?t.showModal({title:"提示",content:"是否确定支付？",success:function(o){if(o.confirm){var n={user_id:e.$store.state.user.id,address_id:e.address.id,payment_id:e.payment_id},a=Object.assign(n,e.require_data);e.service.entire(e,"post",e.APIconfig.api_root.com_page.buy_add,a,function(o,n){0==n.code?o.service.entire(o,"post",o.APIconfig.api_root.com_page.order_pay,{user_id:e.$store.state.user.id,id:n.data.order.id},function(o,n){0==n.code?o.service.order.apply(o,[n,e.payment_name,"../subuser/s_order?status=-1"]):t.showToast({icon:"none",title:n.msg})}):t.showToast({icon:"none",title:n.msg})})}else if(o.cancel)return}}):t.showToast({icon:"none",title:"请选择支付方式"}):t.showToast({icon:"none",title:"请添加收货地址"})}},onLoad:function(t){this.options=JSON.parse(t.data);var e,o=JSON.parse(t.data);e="cart"==o.type?{user_id:this.$store.state.user.id,ids:o.id,buy_type:o.type}:{user_id:this.$store.state.user.id,goods_id:o.id,stock:o.num,spec:o.spec,buy_type:o.type},this.require_data=e},onShow:function(){this.Index()}};e.default=a}).call(this,o("6e42")["default"])},a5a1:function(t,e,o){"use strict";var n=o("f70a"),a=o.n(n);a.a},c165:function(t,e,o){"use strict";(function(t){o("7932"),o("921b");n(o("66fd"));var e=n(o("d5e8"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("6e42")["createPage"])},ca11:function(t,e,o){"use strict";o.r(e);var n=o("7c05"),a=o.n(n);for(var i in n)"default"!==i&&function(t){o.d(e,t,function(){return n[t]})}(i);e["default"]=a.a},d5e8:function(t,e,o){"use strict";o.r(e);var n=o("687a"),a=o("ca11");for(var i in a)"default"!==i&&function(t){o.d(e,t,function(){return a[t]})}(i);o("a5a1");var r,s=o("f0c5"),c=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"745cd4ed",null,!1,n["a"],r);e["default"]=c.exports},f70a:function(t,e,o){}},[["c165","common/runtime","common/vendor"]]]);