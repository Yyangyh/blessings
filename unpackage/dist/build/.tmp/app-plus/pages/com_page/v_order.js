(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/com_page/v_order"],{2490:function(e,t,o){"use strict";o.r(t);var n=o("701a"),r=o("5b49");for(var i in r)"default"!==i&&function(e){o.d(t,e,function(){return r[e]})}(i);o("8fc1");var a,c=o("f0c5"),u=Object(c["a"])(r["default"],n["b"],n["c"],!1,null,"eb401f22",null,!1,n["a"],a);t["default"]=u.exports},"5b49":function(e,t,o){"use strict";o.r(t);var n=o("c7e1"),r=o.n(n);for(var i in n)"default"!==i&&function(e){o.d(t,e,function(){return n[e]})}(i);t["default"]=r.a},"701a":function(e,t,o){"use strict";var n,r=function(){var e=this,t=e.$createElement,o=(e._self._c,e.$api_img()),n=e.$api_img(),r=Number(e.data.v_price),i=e.__map(e.coupon_list,function(t,o){var n=e.service.Test(t.time_start),r=e.service.Test(t.time_end),i=Number(t.where_order_price);return{$orig:e.__get_orig(t),g0:n,g1:r,m3:i}});e._isMounted||(e.e0=function(t){e.show=!e.show},e.e1=function(t){e.show=!e.show}),e.$mp.data=Object.assign({},{$root:{m0:o,m1:n,m2:r,l0:i}})},i=[];o.d(t,"b",function(){return r}),o.d(t,"c",function(){return i}),o.d(t,"a",function(){return n})},"73db":function(e,t,o){},"8fc1":function(e,t,o){"use strict";var n=o("73db"),r=o.n(n);r.a},"90bb":function(e,t,o){"use strict";(function(e){o("7932"),o("921b");n(o("66fd"));var t=n(o("2490"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,o("6e42")["createPage"])},c7e1:function(e,t,o){"use strict";(function(e,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){return o.e("pages/common/returns").then(o.bind(null,"20fe"))},i={data:function(){return{title:"确认订单",data:[],payment:"213",id:"",payment_id:"",require_data:"",coupon_list:"",show:!1,recording:"未选择",v_price:""}},components:{returns:r},methods:{choice:function(e){var t=!0,o=!1,n=void 0;try{for(var r,i=this.payment[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var a=r.value;a.choice=!1}}catch(err){o=!0,n=err}finally{try{t||null==i.return||i.return()}finally{if(o)throw n}}this.payment[e].choice=!0,this.payment_id=this.payment[e].id,this.payment_name=this.payment[e].payment},discount_choice:function(t){var o=!0,n=!1,r=void 0;try{for(var i,a=this.coupon_list[Symbol.iterator]();!(o=(i=a.next()).done);o=!0){var c=i.value;c.choice=!1}}catch(err){n=!0,r=err}finally{try{o||null==a.return||a.return()}finally{if(n)throw r}}this.coupon_list[t].choice=!0,e("log",this.coupon_list," at pages\\com_page\\v_order.vue:171")},finish:function(){var t=this;this.show=!1,this.coupon_list.forEach(function(e,o){1==e.choice&&(e.cid?(t.require_data.coupon_id=t.coupon_list[o].cid,t.recording="￥"+t.coupon_list[o].discount_value+"元",t.v_price=t.data.v_price-t.coupon_list[o].discount_value):(t.require_data.coupon_id=0,t.recording="不使用",t.v_price=t.data.v_price))}),e("log",this.require_data," at pages\\com_page\\v_order.vue:188")},Index:function(){this.service.entire(this,"post",this.APIconfig.api_root.com_page.v_orderDetail,this.require_data,function(t,o){if(t.data=o.data.video,t.v_price=o.data.video.v_price,e("log",o.data.coupon," at pages\\com_page\\v_order.vue:194"),""!=o.data.coupon){var n={not_coupon:"不使用"},r=o.data.coupon;r.push(n);var i=!0,a=!1,c=void 0;try{for(var u,s=r[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var d=u.value;d.choice=!1}}catch(err){a=!0,c=err}finally{try{i||null==s.return||s.return()}finally{if(a)throw c}}t.coupon_list=r,e("log",t.coupon_list," at pages\\com_page\\v_order.vue:205")}var l=o.data.pay_type,p=!0,f=!1,_=void 0;try{for(var v,h=l[Symbol.iterator]();!(p=(v=h.next()).done);p=!0){var m=v.value;m.choice=!1}}catch(err){f=!0,_=err}finally{try{p||null==h.return||h.return()}finally{if(f)throw _}}t.payment=l})},payments:function(){var t=this;this.payment_id?n.showModal({title:"提示",content:"是否确定支付？",success:function(o){if(o.confirm){var r={pay_type:t.payment_name},i=Object.assign(r,t.require_data);e("log",i," at pages\\com_page\\v_order.vue:234"),t.service.entire(t,"post",t.APIconfig.api_root.com_page.v_saveOrder,i,function(t,o){0==o.code?"Alipay"==r.pay_type?(e("log",o.data," at pages\\com_page\\v_order.vue:240"),n.requestPayment({provider:"alipay",orderInfo:o.data,success:function(e){},fail:function(e){},complete:function(e){n.showToast({icon:"none",title:JSON.stringify(err)})}})):"Weixin"==r.pay_type?(e("log",o.data," at pages\\com_page\\v_order.vue:262"),n.requestPayment({provider:"wxpay",orderInfo:o.data,success:function(e){},fail:function(e){},complete:function(e){n.showToast({icon:"none",title:JSON.stringify(e)})}})):(n.showToast({icon:"none",title:o.msg}),setTimeout(function(){t.$jump("/pages/subuser/course_order?status=6")},1e3)):n.showToast({icon:"none",title:o.msg})})}else if(o.cancel)return}}):n.showToast({icon:"none",title:"请选择支付方式"})}},onLoad:function(t){e("log",t," at pages\\com_page\\v_order.vue:315");var o={userid:this.$store.state.user.id,video_id:t.id,section_id:0,coupon_id:0,order_sn:t.order_sn};t.s_id&&(o.section_id=t.s_id),this.require_data=o},onShow:function(){this.Index()}};t.default=i}).call(this,o("0de9")["default"],o("6e42")["default"])}},[["90bb","common/runtime","common/vendor"]]]);