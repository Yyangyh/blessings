(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/com_page/v_order"],{"23c8":function(t,e,n){"use strict";var i=n("cb25"),o=n.n(i);o.a},2490:function(t,e,n){"use strict";n.r(e);var i=n("ed5d"),o=n("5b49");for(var r in o)"default"!==r&&function(t){n.d(e,t,(function(){return o[t]}))}(r);n("23c8");var a,c=n("f0c5"),u=Object(c["a"])(o["default"],i["b"],i["c"],!1,null,"5159f97b",null,!1,i["a"],a);e["default"]=u.exports},"5b49":function(t,e,n){"use strict";n.r(e);var i=n("c7e1"),o=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=o.a},"90bb":function(t,e,n){"use strict";(function(t){n("7932"),n("921b");i(n("66fd"));var e=i(n("2490"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])},c7e1:function(t,e,n){"use strict";(function(t){function i(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=o(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r,a=!0,c=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return a=t.done,t},e:function(t){c=!0,r=t},f:function(){try{a||null==i.return||i.return()}finally{if(c)throw r}}}}function o(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=function(){n.e("pages/common/returns").then(function(){return resolve(n("20fe"))}.bind(null,n)).catch(n.oe)},c={data:function(){return{title:"确认订单",data:[],payment:"213",id:"",payment_id:"",require_data:"",coupon_list:"",show:!1,recording:"未选择",v_price:""}},components:{returns:a},methods:{choice:function(t){var e,n=i(this.payment);try{for(n.s();!(e=n.n()).done;){var o=e.value;o.choice=!1}}catch(r){n.e(r)}finally{n.f()}this.payment[t].choice=!0,this.payment_id=this.payment[t].id,this.payment_name=this.payment[t].payment},discount_choice:function(t){var e,n=i(this.coupon_list);try{for(n.s();!(e=n.n()).done;){var o=e.value;o.choice=!1}}catch(r){n.e(r)}finally{n.f()}this.coupon_list[t].choice=!0},finish:function(){var t=this;this.show=!1,this.coupon_list.forEach((function(e,n){1==e.choice&&(e.cid?(t.require_data.coupon_id=t.coupon_list[n].cid,t.recording="￥"+t.coupon_list[n].discount_value+"元",t.v_price=t.data.v_price-t.coupon_list[n].discount_value):(t.require_data.coupon_id=0,t.recording="不使用",t.v_price=t.data.v_price))}))},Index:function(){this.service.entire(this,"post",this.APIconfig.api_root.com_page.v_orderDetail,this.require_data,(function(t,e){if(t.data=e.data.video,t.v_price=e.data.video.v_price,""!=e.data.coupon){var n={not_coupon:"不使用"},o=e.data.coupon;o.push(n);var r,a=i(o);try{for(a.s();!(r=a.n()).done;){var c=r.value;c.choice=!1}}catch(l){a.e(l)}finally{a.f()}t.coupon_list=o}var u,s=e.data.pay_type,d=i(s);try{for(d.s();!(u=d.n()).done;){var f=u.value;f.choice=!1}}catch(l){d.e(l)}finally{d.f()}t.payment=s}))},payments:function(){var e=this;this.payment_id?t.showModal({title:"提示",content:"是否确定支付？",success:function(n){if(n.confirm){var i={pay_type:e.payment_name},o=Object.assign(i,e.require_data);e.service.entire(e,"post",e.APIconfig.api_root.com_page.v_saveOrder,o,(function(e,n){0==n.code?e.service.order.apply(e,[n,i.pay_type,"./video_details?id="+e.id+"&type="+e.type]):t.showToast({icon:"none",title:n.msg})}))}else if(n.cancel)return}}):t.showToast({icon:"none",title:"请选择支付方式"})}},onLoad:function(t){this.type=t.type,this.id=t.id;var e={userid:this.$store.state.user.id,video_id:t.id,section_id:0,coupon_id:0,order_sn:t.order_sn};t.s_id&&(e.section_id=t.s_id),this.require_data=e},onShow:function(){this.Index()}};e.default=c}).call(this,n("6e42")["default"])},cb25:function(t,e,n){},ed5d:function(t,e,n){"use strict";var i,o=function(){var t=this,e=t.$createElement,n=(t._self._c,t.$api_img()),i=t.service.NumEllipsis(t.data.view),o=t.$api_img(),r=Number(t.data.v_price),a=t.__map(t.coupon_list,(function(e,n){var i=t.service.Test(e.time_start),o=t.service.Test(e.time_end),r=Number(e.where_order_price);return{$orig:t.__get_orig(e),g1:i,g2:o,m3:r}}));t._isMounted||(t.e0=function(e){t.show=!t.show},t.e1=function(e){t.show=!t.show}),t.$mp.data=Object.assign({},{$root:{m0:n,g0:i,m1:o,m2:r,l0:a}})},r=[];n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}))}},[["90bb","common/runtime","common/vendor"]]]);