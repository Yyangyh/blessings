(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/subuser/threeuser/s_order_refund"],{"0824":function(t,e,r){"use strict";var i=r("53e9"),n=r.n(i);n.a},"0af4":function(t,e,r){"use strict";(function(t){r("7932"),r("921b");i(r("66fd"));var e=i(r("7f70"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,r("6e42")["createPage"])},3032:function(t,e,r){"use strict";var i,n=function(){var t=this,e=t.$createElement;t._self._c},a=[];r.d(e,"b",function(){return n}),r.d(e,"c",function(){return a}),r.d(e,"a",function(){return i})},"53e9":function(t,e,r){},"7ebb":function(t,e,r){"use strict";(function(t){function i(t){return s(t)||a(t)||n()}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function a(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function s(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=function(){return r.e("pages/common/returns").then(r.bind(null,"20fe"))},u={components:{returns:o},data:function(){return{title:"退款/退货申请",show:0,add_show:1,type:1,data:"",goods_data:"",order_data:"",return_only:["请选择"],return_money:["请选择"],index:0,image_list:[],images:[],num:"",price:"",reason:"",msg:""}},methods:{bindPickerChange:function(t){this.index=t.target.value,this.reason=t.target.value},chiose:function(t){this.show=t,this.index=0},change_num:function(t){2!=this.type&&(1==t?1==this.num?this.num=1:this.num--:this.num==this.data.returned_data.returned_quantity?this.num=this.data.returned_data.returned_quantity:this.num++)},add_image:function(){var e=this;t.chooseImage({count:1,sourceType:["album"],success:function(r){var i=e.service.loading("上传中");t.uploadFile({url:e.APIconfig.api_root.subuser.threeuser.s_ueditor_index,filePath:r.tempFilePaths[0],name:"upfile",formData:{user_id:e.$store.state.user.id,action:"uploadimage",path_type:e.data.editor_path_type,token:e.$store.state.token},success:function(n){t.hideLoading(),clearTimeout(i),0==JSON.parse(n.data).code&&(e.image_list.push(r.tempFilePaths[0]),e.images.push(JSON.parse(n.data).data.url),3==e.image_list.length&&(e.add_show=2))}})}})},deletes:function(t){this.image_list.splice(t,1),this.images.splice(t,1),this.image_list.length<3&&(this.add_show=1)},ascertain:function(){var e=new Object;if(1==this.show&&(e.number=this.num),e.price=this.price,e.images=this.images,e.type=this.show,e.user_id=this.$store.state.user.id,0==this.show&&(e.reason=this.return_only[this.reason]),1==this.show&&(e.reason=this.return_money[this.reason]),"请选择"==e.reason||""==this.price||this.msg.length<5||0==this.images.length)t.showToast({icon:"none",title:"请完整填写退款信息"});else{e.msg=this.msg;var r,i=Object.values(e);if(-1==i.indexOf(void 0))e.order_id=this.oid,e.order_detail_id=this.id,r=1==this.type?this.APIconfig.api_root.subuser.threeuser.s_aftersale_create:this.APIconfig.api_root.subuser.threeuser.g_Create,this.service.entire(this,"post",r,e,function(e,r){t.showToast({icon:"none",title:r.msg}),0==r.code&&setTimeout(function(){t.navigateBack({delta:2})},1500)});else t.showToast({icon:"none",title:"请完整填写退款信息"})}}},onLoad:function(t){t.id?(this.oid=t.oid,this.id=t.id,this.service.entire(this,"post",this.APIconfig.api_root.subuser.threeuser.s_order_aftersale,{oid:t.oid,did:t.id,user_id:this.$store.state.user.id},function(t,e){var r,n;t.data=e.data,t.goods_data=e.data.order_data,t.num=e.data.returned_data.returned_quantity,t.order_data=e.data.order_data,t.price=e.data.returned_data.refund_price,(r=t.return_only).push.apply(r,i(e.data.return_only_money_reason)),(n=t.return_money).push.apply(n,i(e.data.return_money_goods_reason))})):(this.type=2,this.oid=t.oid,this.service.entire(this,"get",this.APIconfig.api_root.subuser.threeuser.g_Aftersale,{oid:t.oid,user_id:this.$store.state.user.id},function(t,e){var r,n;t.data=e.data,t.goods_data=e.data.goods[0],t.num=1,t.order_data=e.data.order.order,t.price=e.data.order.order.price,(r=t.return_only).push.apply(r,i(e.data.return_only_money_reason)),(n=t.return_money).push.apply(n,i(e.data.return_money_goods_reason_list))}))}};e.default=u}).call(this,r("6e42")["default"])},"7f70":function(t,e,r){"use strict";r.r(e);var i=r("3032"),n=r("bc86");for(var a in n)"default"!==a&&function(t){r.d(e,t,function(){return n[t]})}(a);r("0824");var s,o=r("f0c5"),u=Object(o["a"])(n["default"],i["b"],i["c"],!1,null,"69c38657",null,!1,i["a"],s);e["default"]=u.exports},bc86:function(t,e,r){"use strict";r.r(e);var i=r("7ebb"),n=r.n(i);for(var a in i)"default"!==a&&function(t){r.d(e,t,function(){return i[t]})}(a);e["default"]=n.a}},[["0af4","common/runtime","common/vendor"]]]);